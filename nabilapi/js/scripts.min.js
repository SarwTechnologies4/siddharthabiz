function room_detail(e){return jQuery(".main_booking_form_wrapper").hide(),jQuery("#room_detail_"+e).show(),jQuery(".fullLightSlider").each(function(e){var a=jQuery(this).lightSlider({gallery:!0,item:1,loop:!0,slideMargin:0,thumbItem:8,onBeforeSlide:function(a){jQuery("#counter"+e).text(a.getCurrentSlideCount())}});a.refresh()}),jQuery(".back_to_book_now").removeClass("hide"),!1}function load_available_rooms(){var e=window.location.href,a=getURLParameters(e),t=a.hotel_code,r=jQuery("#apifield_checkin").val(),o=jQuery("#apifield_checkout").val();window.location.href=api_url+"result.php?hotel_code="+t+"&hotel_check_in="+r+"&hotel_check_out="+o}function getURLParameters(e){var a={},t=e.indexOf("?");if(-1==t)return a;for(var r=e.substring(t+1),o=r.split("&"),i=0;i<o.length;i++){var n=o[i].split("=");a[n[0]]=n[1]}return a}var hotel_code=jQuery("hotel").attr("data-code"),api_url=jQuery("apiurl").attr("data-baseurl");jQuery(function(e){if(jQuery("#apifield_checkin").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",minDate:"0",maxDate:"+2Y",onSelect:function(e){var a=jQuery(this).datepicker("getDate");a.setDate(a.getDate()+0);var t=jQuery(this).datepicker("getDate");t.setDate(t.getDate()+180),jQuery("#apifield_checkout").datepicker("option","minDate",a),jQuery("#apifield_checkout").datepicker("option","maxDate",t);var r=jQuery("#apifield_checkin").datepicker("getDate"),o=jQuery("#apifield_checkout").datepicker("getDate"),i=(o-r)/1e3/60/60/24;null!=o&&jQuery("input[name=nofnight]").val(i);var n=jQuery(this).datepicker("getDate","+1d");n.setDate(n.getDate()+1),jQuery("#apifield_checkout").datepicker("setDate",n),jQuery("#apifield_check_in").val(jQuery("#apifield_checkin").val()),jQuery("#apifield_check_out").val(jQuery("#apifield_checkout").val()),load_available_rooms()}}),jQuery("#apifield_checkout").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",minDate:jQuery("#apifield_checkin").datepicker("getDate"),maxDate:"+2Y",onSelect:function(){jQuery("#apifield_check_out").val(jQuery("#apifield_checkout").val());var e=jQuery("#apifield_checkin").datepicker("getDate"),a=jQuery("#apifield_checkout").datepicker("getDate"),t=(a-e)/1e3/60/60/24;null!=a&&jQuery("input[name=nofnight]").val(t),load_available_rooms()}}),jQuery("#api_online_booking_form")[0]){var a=jQuery("#api_online_booking_form");a.validate({rules:{api_firstname:{required:!0},api_lastname:{required:!0},api_contactno:{required:!0},api_email:{required:!0,email:!0},api_country:{required:!0},api_address:{required:!0},api_city:{required:!0},api_zipcode:{required:!0}},messages:{api_firstname:{required:"Please enter the firstname"},api_lastname:{required:"Please enter the lastname"},api_contactno:{required:"Please enter the contact no."},api_email:{required:"Please enter the email address",email:"Please enter valid email address"},api_country:{required:"Please select the country."},api_address:{required:"Please enter the address."},api_city:{required:"Please enter the city."},api_zipcode:{required:"Please enter the zip code."}},submitHandler:function(e){var a=jQuery(e).serialize(),t=window.location.href;a=a+"&current_page="+t;var r=api_url+"submit_booking.php";jQuery.ajax({url:r,method:"POST",data:a+"&hotel_code="+hotel_code,dataType:"json",crossDomain:!0,async:!0,error:function(){jQuery(e).append('<div class="alert alert-danger">An error occoured!</div>'),jQuery(".alert").show().delay(5e3).fadeOut("slow").remove()},success:function(a){return 1==a.payment_form?(jQuery(".main_booking_form_wrapper").hide(),jQuery(".room_details_wrapper").addClass("hide"),jQuery(".creadit_card_main").removeClass("hide"),jQuery("#creadit_card_info").html(a.payment_content)):(jQuery(e).append('<div class="alert alert-danger">'+a.message+"</div>"),jQuery(".alert").show().delay(5e3).fadeOut("slow")),!1},beforeSend:function(){jQuery("input.button_submit_now").val("Processing...")},complete:function(){jQuery("input.button_submit_now").val("Book Now")}})}})}jQuery(".lightSlider").each(function(e){jQuery(this).lightSlider({gallery:!0,item:1,loop:!0,slideMargin:0,thumbItem:4,onBeforeSlide:function(a){jQuery("#counter"+e).text(a.getCurrentSlideCount())}})}),jQuery(".no_of_room").on("change",function(){var e=jQuery(this).val(),a=jQuery(this).parent().parent().parent().parent(),t=a.data("id"),r=a.find("input.max_people").val(),o=a.find("input.max_child").val(),n=a.find("input.extra_bed").val(),l="",u="",d="";for(j=1;j<=e;j++){for(l+='<select name="adult_sub['+t+'][]" class="form-control no_of_adult">                <option value="0">Adult</option>',i=1;i<=r;i++)l+='<option value="'+i+'">'+i+"</option>";for(l+="</select>",u+='<select name="child_sub['+t+'][]" class="form-control no_of_child">            <option value="0">Child</option>',i=1;i<=o;i++)u+='<option value="'+i+'">'+i+"</option>";for(u+="</select>",d+='<select name="extra_bed_sub['+t+'][]" class="form-control no_of_extrabed">                <option value="0">Extra Bed</option>',i=1;i<=n;i++)d+='<option value="'+i+'">'+i+"</option>";d+="</select>"}a.find("div.no_of_adult").html(l),a.find("div.no_of_child").html(u),a.find("div.no_of_extrabed").html(d),sub_total=0,a.find("div.sub_total_div").html(sub_total),a.find("input.sub_total").val(sub_total),jQuery(".no_of_adult").trigger("change")}),jQuery(document).on("change",".no_of_adult,.no_of_extrabed",function(){var e=jQuery(this).parent().parent().parent().parent().parent(),a=(e.data("id"),e.find("input.max_people").val()),t=(e.find("select.no_of_room").val(),e.find("select.no_of_adult").val(),e.find("select.no_of_child").val(),e.find("select.no_of_extrabed").val(),e.find("input.one_person_price").val()),r=e.find("input.two_person_price").val(),o=e.find("input.three_person_price").val(),i=e.find("input.extra_bed_price").val(),n=0,l=0,u=0;jQuery.each(e.find("select.no_of_adult"),function(e,i){var n=jQuery(i).val();if(parseInt(n)>0)if("3"==parseInt(a)){var u=Math.floor(parseInt(n)/3),d=parseInt(n)%3,c=parseInt(u)*parseFloat(o);if(2==d)var _=parseFloat(r);else if(1==d)var _=parseFloat(t);else var _=0;l+=c+_}else if("2"==parseInt(a)){var u=Math.floor(parseInt(n)/2),d=parseInt(n)%2,c=parseInt(u)*parseFloat(r);if(d>0)var _=parseFloat(t);else var _=0;l+=c+_}else l+=parseInt(n)*parseFloat(t)}),jQuery.each(e.find("select.extra_bed_price"),function(e,a){var t=jQuery(a).val();parseInt(t)>0&&parseInt(i)&&(u+=parseInt(t)*parseFloat(i))});var d=jQuery("input[name=nofnight]").val();n=(l+u)*parseInt(d),n=+n.toFixed(2),e.find("div.sub_total_div").html(n),e.find("input.sub_total").val(n),n>0?jQuery("button.button_book_now").removeClass("hide"):jQuery("button.button_book_now").addClass("hide")})}),jQuery(document).on("click",".back_to_book_now",function(){jQuery(".main_booking_form_wrapper").show(),jQuery(".sub_rooms").hide(),jQuery(".sub_rooms").find(".lSPager").remove(),jQuery(".sub_rooms").find(".clone").remove(),jQuery(".back_to_book_now").addClass("hide")}),jQuery(document).on("click","#api_backBtn",function(){jQuery(".main_booking_form_wrapper").show(),jQuery(".room_details_wrapper").addClass("hide")}),jQuery(document).on("click",".button_book_now",function(){var e=jQuery("#initial_api_online_booking_form").serialize(),a=api_url+"hotel_prepare_booking.php";jQuery.ajax({url:a,method:"POST",data:e+"&hotel_code="+hotel_code,dataType:"json",crossDomain:!0,async:!0,error:function(){},success:function(e){return"true"==e.result?(jQuery(".main_booking_form_wrapper").hide(),jQuery(".room_details_wrapper").removeClass("hide"),jQuery("#selected_room_invoice").html(e.html)):(jQuery(form).append('<div class="alert alert-danger">'+e.message+"</div>"),jQuery(".alert").show().delay(5e3).fadeOut("slow")),!1},beforeSend:function(){jQuery("button.button_book_now").html("Processing...")},complete:function(){jQuery("button.button_book_now").html("Book Now")}})});