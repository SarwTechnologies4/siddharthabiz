// Js
jQuery(document).ready(function () {
    var api_url = 'https://www.gundri.com/beta/';
    //var api_url = 'http://localhost/gundri/';
    var query = window.location.href;
    var qs = getURLParameters(query);
    var hotel_code = qs['hotel_code'];
    var user_id = qs['user_id'];
    var checkin_date = qs['hotel_check_in'];
    var checkout_date = qs['hotel_check_out'];
    var _idClass = '#hotel_result';

    var pay_type;
    jQuery.ajax({
        url: api_url + 'get_code.php',
        type: "POST",
        data: {'get_code': hotel_code},
        dataType: 'JSON',
        success: function (data) {
            var res = eval(data);
            var js_url = api_url + res.pay_type + '/hotel_booking.php?hotel_code=' + hotel_code + '&user_id=' + user_id;
            jQuery.ajax({
                url: js_url,
                data: {'hotel_check_in': checkin_date, 'hotel_check_out': checkout_date},
                dataType: 'html',
                success: function (response) {
                    $(_idClass).html(response);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert("You can not send Cross Domain AJAX requests: " + errorThrown);
                }
            });

        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("You can not send Cross Domain AJAX requests: " + errorThrown);
        }
    });
    return false;
})

function getURLParameters(url) {

    var result = {};
    var searchIndex = url.indexOf("?");
    if (searchIndex == -1) return result;
    var sPageURL = url.substring(searchIndex + 1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) {
        var sParameterName = sURLVariables[i].split('=');
        result[sParameterName[0]] = sParameterName[1];
    }
    return result;
}