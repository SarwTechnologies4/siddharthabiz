<!DOCTYPE HTML>
<html lang="en">
<head>
    <!--=============== basic  ===============-->
    <jcms:site:fevicon/>
    <jcms:site:seotitle/>
    <!--=============== css  ===============-->
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css' rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/jquery-ui.min.css">
    <link rel="stylesheet" href="css/plugins.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/color.css">
    <!--=============== favicons ===============-->

</head>
<body>
<!--loader-->
<div class="loader-wrap">
    <div class="pin">
        <div class="pulse"></div>
    </div>
</div>
<!--loader end-->
<!-- Main  -->
<div id="main">
    <!-- header-->
    <header class="main-header">
        <!-- header-top-->
        <div class="header-top fl-wrap">
            <div class="container">
                <div class="d-flex justify-content-between">
                    <div class="logo-holder">
                        <jcms:module:logo/>
                        <!--  <a href="index.html"><img src="images/logo.png" alt=""></a> -->
                    </div>
                    <div class="my-3 d-flex">
                        <a href="<jcms:site:base_url/>listproperty" class="btn btn-outline-light btn-sm d-inline-block">List your property</a>
                        <jcms:module:subscribers:login-welcome/>
                    </div>
                </div>
                <div class="nav-holder main-menu">
                    <nav>
                        <jcms:module:menu/>
                    </nav>
                </div>
            </div>
        </div>
        <!-- header-top end-->
    </header>
    <!--  header end -->
    <!--  wrapper  -->
    <div id="wrapper">
        <!-- content-->
        <section class="hero-section" data-scrollax-parent="true" id="sec1">

            <div class="owl-carousel owl-carousel-no-nav" data-items="1" data-loop="true" data-nav="true" data-autoplay="8000">
                <div class="hero-parallax">
                    <div class="bg" data-bg="https://gundri.com/beta/images/slideshow/W3U2k-vivanta.jpg"
                         data-scrollax="properties: { translateY: '200px' }"
                         style="background-image: url(&quot;https://gundri.com/beta/images/slideshow/W3U2k-vivanta.jpg&quot;); transform: translateZ(0px) translateY(-42.2535px);"></div>
                    <div class="overlay op7"></div>
                </div>
            </div>
            <!--    <div class="hero-parallax">
                   <div class="bg"  data-bg="images/bg/2.jpg" data-scrollax="properties: { translateY: '200px' }"></div>
                   <div class="overlay op7"></div>
               </div> -->
            <div class="hero-section-wrap fl-wrap">
                <div class="container">
                    <div class="home-intro">

                        <h2>Let's start exploring Nepal</h2>
                        <h3>Book rooms with confidence</h3>
                    </div>

                </div>
            </div>


        </section>

        <section class="py-5 small-padding" id="sec1">
            <div class="container">
                <!--  -->
                <jcms:module:vehiclelist/>
            </div>
            <div class="limit-box fl-wrap"></div>
        </section>

        <!-- content end-->
    </div>
    <!--wrapper end -->
    <!--footer -->
    <footer class="main-footer">
        <!--footer-inner-->
        <div class="footer-inner">
            <div class="container">
                <!--footer-fw-widget-->

                <!--footer-fw-widget end-->
                <div class="row">

                    <div class="col-md-12">

                        <p>
                            <jcms:module:footerBrief/>
                        </p>
                        <br><br><br>
                    </div>
                    <!--footer-widget -->
                    <div class="col-md-4">
                        <div class="footer-widget fl-wrap">

                            <div class="footer-contacts-widget fl-wrap">
                                <jcms:module:footer-contactinfo/>

                            </div>
                        </div>
                    </div>

                    <jcms:module:socialbottom/>

                    <div class="col-md-4">

                        <jcms:module:customersupport/>

                    </div>
                    <!--footer-widget end-->

                </div>
                <div class="clearfix"></div>

            </div>
        </div>
        <!--footer-inner end -->
        <div class="footer-bg">
        </div>
        <!--sub-footer-->
        <div class="sub-footer">
            <div class="container">

                <div class="copyright">
                    <jcms:site:copyright/>
                </div>

                <div class="subfooter-nav">
                    <jcms:module:footer-menu/>

                </div>
            </div>
        </div>
        <!--sub-footer end -->
    </footer>

    <!--footer end -->
    <!--register form -->
    <jcms:module:subscribers:login-register-form/>
    <!--register form end -->
    <a class="to-top"><i class="fas fa-caret-up"></i></a>
</div>
<!-- Main end -->
<!--=============== scripts  ===============-->
<!--=============== scripts  ===============-->
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/plugins.js"></script>
<script type="text/javascript" src="js/jquery-ui.min.js"></script>
<script type="text/javascript" src="js/jquery.validate.min.js"></script>
<script src='https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js'
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script type="text/javascript" src="js/scripts.js"></script>
<!--<script src="https://maps.googleapis.com/maps/api/js?key=YOURAPIKEYHERE&libraries=places&callback=initAutocomplete"></script>
<script type="text/javascript" src="js/map-single.js"></script>-->

<script>
    var base_url = jQuery('base').attr('url');
    if ($('#vehicleForm')[0]) {

        $("#search-from").autocomplete({
            source: base_url + "routelist.php",
            // minLength: 2,
            showHintOnFocus: true,
            select: function (event, ui) {
                $('input[name="search_from"]').val(ui.item.id);
            }
        });

        $("#search-to").autocomplete({
            source: base_url + "routelist.php",
            // minLength: 2,
            showHintOnFocus: true,
            select: function (event, ui) {
                $('input[name="search_to"]').val(ui.item.id);
            }
        });

        $('#search-date').datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'yy-mm-dd',
            minDate: '0',
            maxDate: '+2Y'
        });


        $("#vehicleForm").validate({
            errorElement: 'span',
            errorClass: 'validate-has-error',
            rules: {
                searchkey_from: {required: true},
                search_from: {required: true},
                searchkey_to: {required: true},
                search_to: {required: true},
                search_date: {required: true}
            },
            messages: {
                searchkey_from: {required: 'Required !'},
                search_from: {required: 'Required !'},
                searchkey_to: {required: 'Required !'},
                search_to: {required: 'Required !'},
                search_date: {required: 'Required !'}
            },
            submitHandler: function (form) {
                var Frmval = $(form).serialize();
                $("#btn-search").attr("disabled", "true").html('Loading...');
                $.ajax({
                    type: "POST",
                    dataType: "JSON",
                    url: base_url + "routelist.php",
                    data: "action=getlink&" + Frmval,
                    success: function (data) {
                        var msg = eval(data);
                        window.location.href = base_url + "vehicle/" + data.url;
                    }
                });
                return false;
            }
        });

    }

    $(document).on("click", "div.cart-view", function () {
        var user_id = $("input.user_id").val();
        return $("div.cart-list").html("<ul><li>Loading...</li></ul>"),
            $.ajax({
                type: "POST",
                dataType: "JSON",
                url: base_url + "routelist.php",
                data: {
                    action: "list_cart",
                    user_id: user_id
                },
                success: function (data) {
                    var res = eval(data);
                    $("div.cart-list").html(res.result)
                }
            }), !1
    });

    $(document).on("click", "a.remove-cart", function () {
        var _parent = $(this).parents(".cart-remove"),
            cart_id = _parent.attr("data-id"),
            user_id = $("input.user_id").val();
        return $.ajax({
            type: "POST",
            dataType: "JSON",
            url: base_url + "routelist.php",
            data: {
                action: "remove_cart",
                item_id: cart_id,
                user_id: user_id
            },
            success: function (data) {
                var res = eval(data);
                $("span.wl_counter").html(res.no_cart);
                _parent.remove();
                var newMsg = '<div class="alert alert-danger myinfobox" role="alert">\t\t\t\t\t' + res.result + "\t\t\t</div>";
                $(newMsg).prependTo(".vehicle-added").fadeIn(500, function () {
                    $(".myinfobox").delay(2e3).fadeOut(500)
                });
            }
        }), !1
    });

    $(document).on('click', 'span.veh-increment', function (e) {
        var $input = $(this).siblings('.qqnt'),
            _parent = $(this).parents(".cart-remove"),
            val = parseInt($input.html()),
            cart_id = _parent.attr("data-id"),
            user_id = $("input.user_id").val();
        val++;
        $input.html(val);
        $.ajax({
            type: "POST",
            dataType: "JSON",
            url: base_url + "routelist.php",
            data: {
                action: "increment",
                user_id: user_id,
                cart_id: cart_id
            },
            success: function (data) {
            }
        })
    });

    $(document).on('click', 'span.veh-decrement', function (e) {
        var $input = $(this).siblings('.qqnt'),
            _parent = $(this).parents(".cart-remove"),
            val = parseInt($input.html()),
            cart_id = _parent.attr("data-id"),
            user_id = $("input.user_id").val();
        if (val > 1) {
            val--;
        }
        $input.html(val);
        $.ajax({
            type: "POST",
            dataType: "JSON",
            url: base_url + "routelist.php",
            data: {
                action: "decrement",
                user_id: user_id,
                cart_id: cart_id
            },
            success: function (data) {
            }
        })
    });

    $(document).on("click", "button.add-vehicle", function () {
        var _parent = $(this).parents(".vehicle-detail"),
            user_id = _parent.find("input.user_id").val(),
            vehicle_id = _parent.find("input.vehicle_id").val(),
            vehicle_price = _parent.find("input.vehicle_price").val(),
            vendor_id = _parent.find("input.vendor_id").val(),
            vprice_id = _parent.find("input.vprice_id").val();

        $.ajax({
            type: "POST",
            dataType: "JSON",
            url: base_url + "routelist.php",
            data: {
                action: "add_cart",
                user_id: user_id,
                vehicle_id: vehicle_id,
                vehicle_price: vehicle_price,
                vendor_id: vendor_id,
                vprice_id: vprice_id
            },
            success: function (data) {
                var res = eval(data);
                //$('.vehicle-added').html(res.result).css('display', 'block').fadeOut(3000);
                $("span.wl_counter").html(res.no_cart);
                var newMsg = '<div class="alert alert-success myinfobox" role="alert">\t\t\t\t\t' + res.result + "\t\t\t</div>";
                $(newMsg).prependTo(".vehicle-added").fadeIn(500, function () {
                    $(".myinfobox").delay(2e3).fadeOut(500)
                });
                $.ajax({
                    type: "POST",
                    dataType: "JSON",
                    url: base_url + "routelist.php",
                    data: {
                        action: "list_cart",
                        user_id: user_id
                    },
                    success: function (data) {
                        var res = eval(data);
                        $("div.cart-list").html(res.result)
                    }
                })
            }
        })
    });

    $(document).on("click", "button.plz-login", function () {
        $('.modal , .reg-overlay').fadeIn(200);
        $("html, body").addClass("hid-body");
        $('#msgLogin').html("Please Log In.").css('display', 'block').fadeOut(8000);
    });

    $(document).on("click", "a.book-vehicle", function (e) {
        e.preventDefault();
        $(this).attr("disabled", "true").html('Loading...');

        var user_id = $("input.user_id").val();
        var pax = $("input#search-pax").val();
        var searchkey_from = $("input#search-from").val();
        var searchkey_to = $("input#search-to").val();
        var search_date = $("input#search-date").val();
        var search_from = $("input[name=search_from]").val();
        var search_to = $("input[name=search_to]").val();

        $.ajax({
            type: "POST",
            dataType: "JSON",
            url: base_url + "routelist.php",
            data: {
                action: "check_for_booking",
                user_id: user_id,
                searchkey_from: searchkey_from,
                searchkey_to: searchkey_to,
                search_from: search_from,
                search_to: search_to,
                pax: pax,
                search_date: search_date
            },
            success: function (data) {
                var res = eval(data);
                if (res.action == 'success') {
                    window.location.href = base_url + "book/vehicle/" + data.url;
                }
                if (res.action == 'unsuccess_no_vehicle_added') {
                    alert(res.message);
                    $(".book-vehicle").removeAttr("disabled").text('Book Now');
                }
                if (res.action == 'unsuccess_no_space') {
                    alert(res.message);
                    $(".book-vehicle").removeAttr("disabled").text('Book Now');
                }
            }
        });
    });
</script>
</body>
</html>